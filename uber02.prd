# PRD - Sistema de Controle Financeiro para Motoristas de Aplicativo
## Vers√£o Melhorada com Insights de Mercado

---

## 1. Vis√£o Geral do Produto

### 1.1 Objetivo
Desenvolver um sistema web/mobile completo para motoristas de aplicativo controlarem suas finan√ßas de forma inteligente e automatizada, permitindo n√£o apenas o registro manual de dados, mas tamb√©m captura autom√°tica de informa√ß√µes, defini√ß√£o de metas, e an√°lises preditivas para maximizar lucros.

### 1.2 P√∫blico-Alvo
- **Prim√°rio:** Motoristas de aplicativo (Uber, 99, inDrive, Cabify, etc.)
- **Secund√°rio:** Motoristas aut√¥nomos, entregadores de apps (iFood, Rappi)
- **Perfil detalhado:**
  - Trabalham 8-12 horas por dia
  - Precisam tomar decis√µes r√°pidas sobre quando/onde trabalhar
  - Querem saber se o trabalho est√° sendo rent√°vel
  - Dificuldade com planilhas complexas
  - Necessitam de informa√ß√µes para declara√ß√£o de IR

### 1.3 Problema a Resolver
Motoristas enfrentam m√∫ltiplos desafios financeiros:
- N√£o sabem o lucro real ap√≥s todas as despesas
- Dificuldade em organizar gastos para declara√ß√£o de IR
- N√£o conseguem identificar padr√µes de maior rentabilidade
- Perdem tempo com controles manuais e planilhas
- Falta visibilidade sobre custos operacionais reais por quil√¥metro

### 1.4 Proposta de Valor
**"Controle financeiro completo em menos de 1 minuto por dia, com intelig√™ncia para voc√™ ganhar mais"**

- ‚ö° Registro super r√°pido (< 60 segundos)
- üìä Dashboards visuais e intuitivos
- üéØ Sistema de metas com acompanhamento em tempo real
- ü§ñ Captura autom√°tica de dados (sem√°foro/acessibilidade)
- üìà Insights inteligentes sobre rentabilidade
- üí∞ Relat√≥rios prontos para IR

### 1.5 Diferenciais vs Concorr√™ncia (An√°lise DRIVH e Mercado)

**Vantagens do DRIVH (a incorporar):**
- Sistema de sem√°foro para captura autom√°tica
- Categoriza√ß√£o por tipo de corrida (UberX, UberBlack, 99Pop, etc.)
- Metas vis√≠veis na tela principal com progresso em tempo real
- Comparativos mensais autom√°ticos

**Nossos Diferenciais Adicionais:**
- Interface mais moderna e intuitiva
- An√°lises preditivas e recomenda√ß√µes
- Suporte a m√∫ltiplas plataformas simultaneamente
- Relat√≥rios fiscais automatizados
- Comunidade e benchmarking an√¥nimo

---

## 2. Funcionalidades do Sistema

### 2.1 Autentica√ß√£o e Cadastro

#### 2.1.1 Tela de Login
**Elementos:**
- Logo do sistema (√≠cone de carro + cifr√£o) com anima√ß√£o sutil
- Campo: E-mail com valida√ß√£o em tempo real
- Campo: Senha com toggle "mostrar/ocultar"
- Checkbox: "Lembrar-me por 30 dias"
- Bot√£o: "Entrar" (destaque, cor prim√°ria, full-width mobile)
- Link: "Esqueci minha senha"
- Link: "N√£o tem conta? Cadastre-se gr√°tis"
- **NOVO:** Bot√£o de login social (Google) para onboarding mais r√°pido

**Valida√ß√µes:**
- E-mail: formato v√°lido, mensagem instant√¢nea
- Senha: m√≠nimo 6 caracteres
- Rate limiting: m√°ximo 5 tentativas em 15 minutos
- Bloqueio tempor√°rio ap√≥s tentativas falhas

**Comportamento:**
- Loading elegante durante autentica√ß√£o (skeleton)
- Mensagens de erro humanizadas ("E-mail ou senha incorretos" ao inv√©s de "Credenciais inv√°lidas")
- Redirect inteligente: se veio de uma p√°gina espec√≠fica, volta para ela
- Suporte a biometria (Touch ID/Face ID) em apps nativos

#### 2.1.2 Tela de Cadastro R√°pido
**Elementos:**
- **Passo 1 - Dados B√°sicos:**
  - Nome completo
  - E-mail (com valida√ß√£o de dom√≠nio)
  - Senha (indicador de for√ßa em tempo real)
  - Confirmar senha

- **Passo 2 - Perfil de Motorista (NOVO):**
  - Plataformas que trabalha (checkbox m√∫ltiplo: Uber, 99, inDrive, Cabify, etc.)
  - Tipo de ve√≠culo (Sedan, SUV, Hatch, Moto)
  - Cidade/Estado (autocompletar)
  - Ano que come√ßou a trabalhar

- **NOVO: Passo 3 - Configura√ß√£o Inicial R√°pida:**
  - Meta mensal desejada (R$)
  - M√©dia de dias trabalhados por semana
  - Principal motiva√ß√£o (ganhar mais, organizar finan√ßas, IR)

**Valida√ß√µes:**
- Nome: m√≠nimo 3 caracteres
- E-mail: formato v√°lido, √∫nico no sistema, verifica√ß√£o de dom√≠nio
- Senha: 
  - M√≠nimo 8 caracteres (aumentado de 6)
  - Deve conter letra mai√∫scula, min√∫scula e n√∫mero
  - Indicador visual de for√ßa (fraca, m√©dia, forte)
- Plataformas: pelo menos 1 selecionada
- Termos: obrigat√≥rio aceitar

**Comportamento:**
- Indicador de progresso (1/3, 2/3, 3/3)
- Salvamento autom√°tico entre passos
- Op√ß√£o de pular Passo 3 e configurar depois
- E-mail de boas-vindas com dicas r√°pidas
- Tutorial interativo no primeiro acesso (pode pular)

#### 2.1.3 Recupera√ß√£o de Senha
**Elementos:**
- Ilustra√ß√£o amig√°vel (cadeado)
- Campo: E-mail cadastrado
- Bot√£o: "Enviar link de recupera√ß√£o"
- Mensagem de confirma√ß√£o com timer (reenviar em 60s)

**Comportamento:**
- E-mail enviado com link v√°lido por 2 horas (aumentado de 1h)
- Link com token seguro (JWT)
- P√°gina de redefini√ß√£o: Nova senha + Confirmar
- Valida√ß√£o de for√ßa da nova senha
- Ap√≥s redefinir: auto-login e notifica√ß√£o de sucesso
- Log de seguran√ßa: notificar por e-mail sobre troca de senha

---

### 2.2 Dashboard Principal (Tela Inicial)

#### 2.2.1 Header Fixo
**Elementos:**
- Logo/Nome do sistema (esqueda)
- **NOVO:** Badge de notifica√ß√µes (alertas, dicas)
- **NOVO:** Seletor de per√≠odo r√°pido (Hoje | Esta Semana | Este M√™s | Personalizado)
- Nome do usu√°rio + foto miniatura
- Bot√£o: "‚ûï Novo Registro" (sempre vis√≠vel, sticky no mobile, cor prim√°ria)
- Menu dropdown do usu√°rio:
  - Meu Perfil
  - Minhas Metas
  - Configura√ß√µes
  - Central de Ajuda (NOVO)
  - Sair

#### 2.2.2 Banner de Meta (NOVO - Inspirado no DRIVH)
**Posicionamento:** Logo abaixo do header, antes dos cards

**Elementos:**
- T√≠tulo: "Meta de [M√™s Atual]"
- Valor meta: R$ X.XXX,XX
- Progresso visual:
  - Barra de progresso colorida (verde quando >80%, amarelo 50-80%, vermelho <50%)
  - Percentual alcan√ßado: "78% conclu√≠do"
- Informa√ß√µes contextuais:
  - "Faltam R$ XXX para sua meta"
  - "Voc√™ est√° X% acima/abaixo da m√©dia do m√™s passado"
- Bot√£o: "Ajustar Meta"

**Comportamento:**
- Atualiza√ß√£o em tempo real ao adicionar registros
- Anima√ß√£o sutil de preenchimento da barra
- Notifica√ß√£o festiva ao atingir 100%
- Se n√£o h√° meta definida, mostrar call-to-action para criar

#### 2.2.3 Cards de Resumo do Per√≠odo Selecionado
**4 Cards Principais com Evolu√ß√£o:**

**1. Faturamento Bruto**
- √çcone: üí∞ (cifr√£o verde pulsante)
- Valor principal: R$ X.XXX,XX (fonte grande, bold)
- **NOVO:** Subdivis√£o por plataforma:
  - Uber: R$ XXX (XX%)
  - 99: R$ XXX (XX%)
  - Outras: R$ XXX (XX%)
- Badge de compara√ß√£o: 
  - "‚Üó +15% vs m√™s anterior" (verde)
  - "‚Üò -8% vs m√™s anterior" (vermelho)
- Mini gr√°fico sparkline (√∫ltimos 7 dias)

**2. Despesas Totais**
- √çcone: ‚õΩ (bomba de combust√≠vel vermelha)
- Valor principal: R$ X.XXX,XX
- **NOVO:** Breakdown por categoria:
  - Combust√≠vel: R$ XXX (XX%)
  - Manuten√ß√£o: R$ XXX (XX%)
  - Alimenta√ß√£o: R$ XXX (XX%)
  - Outros: R$ XXX (XX%)
- Badge: % de varia√ß√£o vs per√≠odo anterior
- Alerta se despesas > 50% do faturamento
- Mini gr√°fico sparkline

**3. Lucro L√≠quido (Destaque Principal)**
- √çcone: üìà (gr√°fico crescente azul/verde)
- Valor principal: R$ X.XXX,XX (fonte 30% maior que outros cards)
- Cor din√¢mica: verde se positivo, vermelho se negativo
- **NOVO:** Margem de lucro: "XX% de margem"
- **NOVO:** Comparativo inteligente:
  - "Melhor resultado dos √∫ltimos 3 meses! üéâ"
  - "Abaixo da sua m√©dia, mas voc√™ consegue! üí™"
- Badge: % de varia√ß√£o
- Mini gr√°fico sparkline

**4. Quilometragem & Efici√™ncia**
- √çcone: üöó (veloc√≠metro roxo)
- Valor principal: X.XXX km
- **NOVO:** M√©tricas de efici√™ncia:
  - Lucro por km: R$ X,XX/km
  - Custo por km: R$ X,XX/km
  - Faturamento por km: R$ X,XX/km
- Badge: varia√ß√£o vs per√≠odo anterior
- **NOVO:** Indicador de efici√™ncia:
  - ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5 estrelas se lucro/km > R$3)
  - Texto motivacional baseado na performance

**Design dos Cards:**
- Gradiente suave de fundo (ex: verde claro ‚Üí verde escuro no card de faturamento)
- Sombra com profundidade (shadow-lg)
- Border-radius: 16px
- Padding generoso: 24px
- Hover effect: leve eleva√ß√£o (transform: translateY(-4px))
- Loading skeleton enquanto carrega dados
- Anima√ß√£o de contagem ao exibir valores (count-up effect)
- **Responsividade:**
  - Desktop: 4 colunas
  - Tablet: 2x2 grid
  - Mobile: 1 coluna, scroll vertical

#### 2.2.4 Se√ß√£o de Insights Inteligentes (NOVO)
**Posicionamento:** Entre cards e gr√°ficos

**Card de Dicas Personalizadas:**
- √çcone: üí° (l√¢mpada)
- T√≠tulo: "Insights da Semana"
- Carrossel de dicas baseadas em dados:
  - "Ter√ßas-feiras s√£o seus dias mais lucrativos! M√©dia de R$ XXX"
  - "Seu custo por km aumentou 12% este m√™s. Verifique manuten√ß√£o."
  - "Voc√™ trabalhou 3 dias a menos que o usual. Meta ajustada!"
  - "Motoristas na sua regi√£o faturam 8% a mais entre 18h-22h"

**Algoritmo de Insights:**
- An√°lise de padr√µes hist√≥ricos do usu√°rio
- Compara√ß√£o com benchmarks an√¥nimos da regi√£o
- Identifica√ß√£o de anomalias (gastos incomuns, queda de rendimento)
- Sugest√µes acion√°veis (quando trabalhar, onde economizar)

#### 2.2.5 Estat√≠sticas Detalhadas
**Se√ß√£o 1: Performance do Per√≠odo (M√™s/Semana)**
- Dias trabalhados no per√≠odo
- M√©dia de lucro por dia: R$ XXX
- Melhor dia: DD/MM (R$ XXX) üèÜ
- Pior dia: DD/MM (R$ XXX) 
- Horas estimadas trabalhadas (NOVO - baseado em km e m√©dia)
- Lucro por hora: R$ XX/h (NOVO)
- **NOVO:** Taxa de ocupa√ß√£o estimada: XX% (baseado em km e tempo)

**Se√ß√£o 2: Comparativos Mensais (NOVO)**
- Tabela de compara√ß√£o dos √∫ltimos 6 meses:
  | M√™s | Faturamento | Gastos | Lucro | Dias | Lucro/Dia |
  - Destaque para m√™s atual
  - Indicadores visuais de crescimento/queda

**Se√ß√£o 3: Totais Acumulados (Desde o Cadastro)**
- Faturamento total: R$ XX.XXX
- Gastos totais: R$ XX.XXX
- **Lucro total acumulado: R$ XX.XXX** (destaque especial)
- Quilometragem total: XX.XXX km
- Total de dias trabalhados: XXX dias
- **NOVO:** Economia estimada em impostos (baseado em gastos documentados)

#### 2.2.6 Gr√°ficos Avan√ßados

**Gr√°fico 1: Evolu√ß√£o Financeira Completa (Linha)**
- Per√≠odo: configur√°vel (7, 15, 30, 90 dias, ano completo)
- 3 Linhas principais:
  - Faturamento (verde s√≥lida, espessura 3px)
  - Gastos (vermelho s√≥lida, espessura 3px)
  - Lucro (azul s√≥lida, espessura 4px - destaque)
- **NOVO:** √Årea preenchida entre faturamento e gastos (lucro)
- Eixo X: datas formatadas (DD/MM)
- Eixo Y: valores em R$ com abrevia√ß√£o (R$ 2,5k)
- Tooltip interativo ao hover:
  - Data completa
  - Valores exatos
  - % em rela√ß√£o √† m√©dia
- Marcadores especiais:
  - üéØ Dias que bateram a meta di√°ria
  - ‚ö†Ô∏è Dias com gastos acima do normal
- Zoom e pan (scroll para zoom, arrastar para pan)
- Exportar gr√°fico como imagem (PNG)

**Gr√°fico 2: Comparativo Di√°rio (Barras Agrupadas)**
- Per√≠odo: √∫ltimos 30 dias (personaliz√°vel)
- 2 Barras por dia lado a lado:
  - Faturamento (verde, 60% opacidade)
  - Gastos (vermelho, 60% opacidade)
- Linha sobreposta: Lucro (azul)
- Tooltip detalhado:
  - Data
  - Faturamento: R$ XXX
  - Gastos: R$ XXX
  - Lucro: R$ XXX
  - Margem: XX%
- Filtro r√°pido: "Mostrar apenas dias trabalhados"
- Destaque visual nos finais de semana

**Gr√°fico 3: Distribui√ß√£o de Gastos (Pizza/Donut)**
- Categorias de gastos com cores distintas:
  - Combust√≠vel (laranja): XX%
  - Manuten√ß√£o (roxo): XX%
  - Alimenta√ß√£o (amarelo): XX%
  - Lavagem (azul claro): XX%
  - Ped√°gios (rosa): XX%
  - Outros (cinza): XX%
- Centro do donut: "Total de Gastos: R$ X.XXX"
- Legenda interativa (click para destacar fatia)
- Anima√ß√£o de entrada (desenhar fatias)
- Compara√ß√£o com m√™s anterior ao lado

**Gr√°fico 4: Performance por Plataforma (NOVO - Barras Horizontais)**
- Compara√ß√£o entre Uber, 99, Cabify, etc:
  - Faturamento total por plataforma
  - Lucro m√©dio por corrida
  - N√∫mero de corridas (se dispon√≠vel)
- Ordenado por lucratividade
- Tooltip com detalhes completos
- Insight autom√°tico: "99 √© 15% mais lucrativo para voc√™"

**Gr√°fico 5: Heatmap de Rentabilidade (NOVO - Fase 2)**
- Calend√°rio visual dos √∫ltimos 90 dias
- Cor por lucro: verde intenso (alto) ‚Üí amarelo (m√©dio) ‚Üí vermelho (baixo)
- Hover mostra detalhes do dia
- Identifica√ß√£o visual de padr√µes (ex: quintas sempre melhores)

#### 2.2.7 Hist√≥rico de Registros (Tabela Aprimorada)
**Cabe√ßalho da Tabela:**
- Bot√µes de a√ß√£o:
  - "‚ûï Novo Registro"
  - "üìä Exportar" (Excel/CSV/PDF)
  - "üîç Filtros Avan√ßados"
  - "‚öôÔ∏è Personalizar Colunas"

**Colunas (personaliz√°veis):**
1. Data (DD/MM/AAAA) - sort padr√£o descendente
2. Dia da Semana (NOVO) - badge colorido
3. Plataforma(s) (NOVO) - chips m√∫ltiplos se mais de uma
4. Faturamento (R$) - verde, bold
5. Gastos (R$) - vermelho
6. Lucro (R$) - destaque, cor din√¢mica (verde/vermelho)
7. Margem (%) (NOVO) - badge colorido
8. Quilometragem (km)
9. Lucro/km (R$) - m√©trica chave
10. **NOVO:** Horas Trabalhadas (estimado ou manual)
11. **NOVO:** N√∫mero de Corridas (se informado)
12. Observa√ß√µes - preview (expandir ao click)
13. A√ß√µes:
    - ‚úèÔ∏è Editar
    - üìã Duplicar (NOVO)
    - üóëÔ∏è Excluir

**Funcionalidades Avan√ßadas:**
- **Ordena√ß√£o:** por qualquer coluna (ASC/DESC)
- **Pagina√ß√£o:** 20, 50, 100 registros por p√°gina
- **Busca inteligente:** por data, valor, observa√ß√£o
- **Filtros M√∫ltiplos:**
  - Per√≠odo: √∫ltima semana, m√™s, trimestre, ano, customizado
  - Plataforma espec√≠fica
  - Dias da semana
  - Faixa de lucro
  - Com/sem observa√ß√µes
- **Sele√ß√£o M√∫ltipla:**
  - Checkbox para selecionar v√°rios registros
  - A√ß√µes em lote: excluir, exportar selecionados
- **Totalizadores:**
  - Linha de totais ao final da tabela
  - Totais dos registros filtrados
- **Visualiza√ß√£o:**
  - Modo compacto/expandido
  - Destaque de linhas ao hover
  - Cores alternadas (zebra striping)
- **Inline Editing:** edi√ß√£o r√°pida sem modal
- **Atalhos de Teclado:**
  - N: Novo registro
  - /: Focar busca
  - ‚Üë‚Üì: Navegar registros

---

### 2.3 Formul√°rio de Registro Di√°rio Aprimorado

#### 2.3.1 Modal de Registro Inteligente
**Layout Responsivo:**
- Desktop: Modal centralizado (600px largura)
- Mobile: Full-screen overlay com anima√ß√£o slide-up

**Cabe√ßalho do Modal:**
- T√≠tulo: "Registrar Dia de Trabalho"
- Subtitle: Data selecionada formatada
- Bot√£o fechar (X) no canto superior direito

**Se√ß√£o 1: Informa√ß√µes B√°sicas**

**Campo: Data**
- Type: date picker moderno
- Default: hoje
- Valida√ß√£o: n√£o pode ser futura, n√£o pode duplicar
- Atalhos: "Hoje", "Ontem", "Anteontem"
- Indicador visual se j√° existe registro

**Campo: Plataformas Utilizadas (NOVO)**
- Checkbox m√∫ltipla com √≠cones:
  - ‚òëÔ∏è Uber
  - ‚òëÔ∏è 99
  - ‚òëÔ∏è inDrive
  - ‚òëÔ∏è Cabify
  - ‚òëÔ∏è Outros
- Permite selecionar m√∫ltiplas
- Salva prefer√™ncia para pr√≥ximos registros

**Se√ß√£o 2: Ganhos**

**Campo: Faturamento Total do Dia**
- Input com m√°scara de moeda: R$ 0,00
- Type: number com 2 decimais
- Placeholder: "R$ 0,00"
- Obrigat√≥rio
- Min: 0
- **NOVO:** Op√ß√£o de detalhar por plataforma (expandir):
  - Uber: R$ XXX
  - 99: R$ XXX
  - Total calculado automaticamente

**Campo: N√∫mero de Corridas (NOVO - Opcional)**
- Type: number inteiro
- Placeholder: "Quantas corridas realizou?"
- Calcula automaticamente: ticket m√©dio (faturamento/corridas)
- Mostra em tempo real: "M√©dia de R$ XX por corrida"

**Se√ß√£o 3: Custos**

**Campo: Quilometragem**
- Type: number com 1 decimal
- Placeholder: "0 km"
- Obrigat√≥rio
- Min: 0
- Max razo√°vel: 1000km (aviso se exceder)
- Sufixo fixo: "km"
- **NOVO:** Op√ß√£o de estimar baseado em horas (toggle)

**Campo: Gastos Totais**
- Input com m√°scara: R$ 0,00
- Obrigat√≥rio
- Min: 0
- Bot√£o: "üí≥ Detalhar Gastos" (toggle expans√£o)

**Subcampos de Gastos (Expans√≠vel):**
Quando "Detalhar Gastos" ativado, exibir:

1. **Combust√≠vel** ‚õΩ
   - R$ 0,00
   - Sugest√£o baseada em m√©dia: "Usual: ~R$ XXX"
   
2. **Manuten√ß√£o** üîß
   - R$ 0,00
   - Exemplos: troca de √≥leo, pneus, etc.

3. **Alimenta√ß√£o** üçî
   - R$ 0,00
   
4. **Lavagem** üöø
   - R$ 0,00

5. **Ped√°gios** üõ£Ô∏è
   - R$ 0,00

6. **Estacionamento** üÖøÔ∏è
   - R$ 0,00

7. **Outros** üì¶
   - R$ 0,00
   - Campo de texto: "Especificar"

**Total dos gastos detalhados:** R$ XXX,XX (auto-calculado)
- Bot√£o: "Usar este valor" (preenche campo de Gastos Totais)

**Se√ß√£o 4: Informa√ß√µes Complementares (NOVO)**

**Campo: Horas Trabalhadas**
- Type: time ou number
- Formato: "8h 30min" ou "8.5"
- Opcional mas recomendado
- Ajuda a calcular: lucro por hora
- Sugest√£o baseada em km: "Estimamos ~X horas"

**Campo: Hor√°rio de Trabalho (NOVO - Opcional)**
- In√≠cio: HH:MM
- Fim: HH:MM
- Calcula horas automaticamente
- √ötil para an√°lise de rentabilidade por per√≠odo

**Campo: Observa√ß√µes**
- Type: textarea
- Max: 300 caracteres (aumentado de 200)
- Placeholder: "Ex: chuva intensa, evento na cidade, tr√¢nsito pesado..."
- Contador de caracteres
- **NOVO:** Tags r√°pidas (click para adicionar):
  - üåßÔ∏è Chuva
  - üö¶ Tr√¢nsito
  - üéâ Evento
  - üò¥ Pouco movimento
  - üî• Dia excelente

**Se√ß√£o 5: Pr√©-visualiza√ß√£o em Tempo Real**

**Card de Resumo (sidebar ou bottom):**
- Fundo levemente destacado
- Atualiza conforme usu√°rio preenche:

```
üìä RESUMO DO DIA

Faturamento: R$ 350,00
(-) Gastos: R$ 120,00
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
= Lucro: R$ 230,00 ‚úÖ

Margem: 65,7%
Lucro/km: R$ 1,92/km
Lucro/hora: R$ 28,75/h

üéØ Meta di√°ria: R$ 200,00
Voc√™ SUPEROU a meta em 15%! üéâ
```

**Indicadores Visuais:**
- Cor verde se lucro positivo
- Cor vermelha se negativo
- Emoji motivacional baseado em performance
- Compara√ß√£o com meta di√°ria autom√°tica

**Valida√ß√µes e Alertas:**
- ‚ö†Ô∏è "Seus gastos est√£o acima de 50% do faturamento"
- ‚ö†Ô∏è "Lucro/km est√° abaixo da sua m√©dia (R$ X,XX)"
- ‚úÖ "√ìtimo! Melhor resultado da semana"

**Bot√µes de A√ß√£o:**
- **"üíæ Salvar Registro"** (prim√°rio, destaque)
  - Verde, bold, full-width mobile
  - Loading state ao salvar
  - Desabilitado se campos obrigat√≥rios vazios
  
- **"Cancelar"** (secund√°rio, outline)
  - Confirma√ß√£o se h√° dados preenchidos

**Ap√≥s Salvar:**
1. Anima√ß√£o de sucesso (checkmark)
2. Toast notification: "Registro salvo com sucesso! ‚úÖ"
3. **NOVO:** Op√ß√µes r√°pidas:
   - "Adicionar outro dia"
   - "Ver no hist√≥rico"
   - "Voltar ao dashboard"
4. Dashboard atualiza automaticamente (sem reload)
5. Se atingiu meta, mostrar celebra√ß√£o üéâ

**Funcionalidades Especiais:**

**1. Auto-save (NOVO):**
- Salva rascunho automaticamente a cada 30s
- Notifica√ß√£o discreta: "Rascunho salvo"
- Recupera dados se fechar modal acidentalmente

**2. Duplicar Registro Anterior:**
- Bot√£o: "Copiar dados de ontem"
- Preenche todos os campos (exceto data)
- Usu√°rio s√≥ ajusta os valores

**3. Templates de Registro (NOVO - Fase 2):**
- Salvar configura√ß√£o frequente como template
- Ex: "Dia t√≠pico de semana", "Fim de semana"
- Click para carregar template

---

### 2.4 Sistema de Metas (NOVO - Inspirado no DRIVH)

#### 2.4.1 Tela de Metas
**Acesso:** Menu principal > "Minhas Metas" ou bot√£o "Ajustar Meta" no banner

**Layout:**

**Se√ß√£o 1: Meta Mensal Ativa**
- Card destacado com a meta atual do m√™s
- Progresso visual grande (barra ou circular)
- Informa√ß√µes:
  - Meta: R$ X.XXX
  - Alcan√ßado: R$ X.XXX (XX%)
  - Faltam: R$ XXX
  - Dias restantes no m√™s: XX dias
  - Necess√°rio por dia: R$ XXX/dia
- **NOVO:** Proje√ß√£o inteligente:
  - "Mantendo sua m√©dia, voc√™ deve alcan√ßar R$ X.XXX (XXX% da meta)"
  - "Para bater a meta, trabalhe mais X dias"
- Bot√£o: "Editar Meta"

**Se√ß√£o 2: Hist√≥rico de Metas**
- Tabela dos √∫ltimos 6 meses:
  | M√™s | Meta | Alcan√ßado | % | Status |
  - Status: ‚úÖ Atingida, ‚ö†Ô∏è Parcial, ‚ùå N√£o atingida
- Gr√°fico de linha: evolu√ß√£o de metas vs realizado

**Se√ß√£o 3: Metas Personalizadas (Fase 2)**
- Al√©m da meta mensal, criar metas espec√≠ficas:
  - Meta semanal
  - Meta por plataforma
  - Meta de economia (reduzir gastos X%)
  - Meta de efici√™ncia (lucro/km > R$ X)

#### 2.4.2 Configura√ß√£o de Meta
**Modal de Edi√ß√£o:**

**Campo: Valor da Meta Mensal**
- Input: R$ 0,00
- Sugest√µes baseadas em hist√≥rico:
  - "Sua m√©dia dos √∫ltimos 3 meses: R$ X.XXX"
  - "Sugest√£o: R$ X.XXX (10% acima da m√©dia)"
- Valida√ß√£o: deve ser positivo

**Campo: Meta Di√°ria Autom√°tica**
- Calculado automaticamente
- Leva em conta dias √∫teis restantes
- Recalcula diariamente
- Exemplo: "Meta di√°ria: R$ 250 (baseado em 22 dias √∫teis)"

**Op√ß√µes Avan√ßadas:**
- Ajustar dias de trabalho esperados no m√™s
- Excluir finais de semana do c√°lculo
- Considerar feriados

**Notifica√ß√µes de Meta:**
- ‚òëÔ∏è Notificar quando atingir 50% da meta
- ‚òëÔ∏è Notificar quando atingir 100% da meta
- ‚òëÔ∏è Alerta se estiver abaixo do esperado (meio do m√™s)

**Bot√µes:**
- "Salvar Meta"
- "Cancelar"

---

### 2.5 Perfil do Usu√°rio

#### 2.5.1 Informa√ß√µes Pessoais
**Campos edit√°veis:**
- Foto de perfil (upload de imagem, crop integrado)
- Nome completo
- E-mail (visualizar apenas, n√£o edit√°vel)
- Celular (com valida√ß√£o)
- Cidade/Estado (autocomplete)
- **NOVO:** Tipo de ve√≠culo (Sedan, SUV, Hatch, Moto)
- **NOVO:** Ano de in√≠cio como motorista
- **NOVO:** Plataformas principais (m√∫ltipla escolha)

**Bot√£o:**
- "Salvar Altera√ß√µes"
- Feedback visual de salvamento

#### 2.5.2 Configura√ß√µes de Conta
**Op√ß√µes:**
- **Alterar senha:**
  - Senha atual (obrigat√≥rio)
  - Nova senha (valida√ß√£o de for√ßa)
  - Confirmar nova senha
  - Bot√£o: "Atualizar Senha"
  
- **Autentica√ß√£o em dois fatores (NOVO - Fase 2):**
  - Toggle on/off
  - SMS ou App autenticador
  
- **Sess√µes ativas (NOVO):**
  - Listar dispositivos conectados
  - Op√ß√£o de desconectar todos
  
- **Excluir conta:**
  - Confirma√ß√£o dupla com senha
  - Aviso sobre perda permanente de dados
  - Per√≠odo de gra√ßa de 30 dias (recupera√ß√£o)

#### 2.5.3 Prefer√™ncias do Sistema
**Op√ß√µes:**

**Regionaliza√ß√£o:**
- Moeda: R$ (BRL) - preparado para expans√£o
- Formato de data: DD/MM/AAAA
- Formato de n√∫mero: 1.234,56 (brasileiro)

**Notifica√ß√µes:**
- **Por E-mail:**
  - ‚òëÔ∏è Resumo semanal de performance
  - ‚òëÔ∏è Resumo mensal detalhado
  - ‚òëÔ∏è Alertas de gastos acima do normal
  - ‚òëÔ∏è Lembretes de registro pendente
  - ‚òëÔ∏è Conquistas e marcos atingidos
  - ‚òëÔ∏è Dicas personalizadas

- **Push (App Mobile - Fase 3):**
  - ‚òëÔ∏è Lembrete di√°rio para registrar
  - ‚òëÔ∏è Notifica√ß√£o ao atingir meta
  - ‚òëÔ∏è Insights semanais

**Interface:**
- Tema: Claro | Escuro | Autom√°tico (NOVO)
- Idioma: Portugu√™s (preparar para multi-idioma)

**Privacidade (NOVO):**
- ‚òëÔ∏è Participar de benchmarking an√¥nimo
- ‚òëÔ∏è Compartilhar dados para melhorias
- Visualizar dados coletados

---

### 2.6 Recursos Adicionais Priorit√°rios

#### 2.6.1 Captura Autom√°tica de Dados (NOVO - Diferencial Competitivo)
**Inspirado no sistema "Sem√°foro" do DRIVH**

**Funcionalidade:**
- Utiliza servi√ßo de acessibilidade (Android)
- Monitora apps de motorista em segundo plano
- Captura automaticamente:
  - Valor de cada corrida
  - Quilometragem percorrida
  - Tipo de corrida (UberX, 99Pop, etc.)
  - Hor√°rio de in√≠cio/fim

**Interface:**
- Toggle on/off nas configura√ß√µes
- Tutorial de ativa√ß√£o das permiss√µes
- Indicador de status: "Captura ativa üü¢"
- Log de corridas capturadas (revis√£o antes de salvar)

**Privacidade:**
- Dados processados localmente
- N√£o envia informa√ß√µes para servidor sem consentimento
- Usu√°rio sempre confirma antes de registrar

**Limita√ß√µes:**
- Dispon√≠vel inicialmente apenas para Android
- Requer permiss√µes de acessibilidade
- Funciona com Uber e 99 (expandir para outras plataformas)

#### 2.6.2 Relat√≥rios Fiscais para IR (DIFERENCIAL)
**Acesso:** Menu > "Relat√≥rios" > "Imposto de Renda"

**Funcionalidades:**

**1. Relat√≥rio Anual Completo**
- Exporta√ß√£o em formato aceito pela Receita Federal
- Separa√ß√£o clara:
  - Receitas tribut√°veis (faturamento total)
  - Despesas dedut√≠veis (combust√≠vel, manuten√ß√£o, etc.)
  - Lucro l√≠quido
- Formato: PDF profissional + CSV para importa√ß√£o

**2. Categoriza√ß√£o Fiscal Autom√°tica**
- Gastos j√° categorizados conforme legisla√ß√£o
- Indica√ß√£o de quais despesas s√£o dedut√≠veis
- C√°lculo estimado de imposto devido

**3. Documenta√ß√£o**
- Checklist do que voc√™ precisa declarar
- Links para tutoriais da Receita Federal
- Avisos importantes sobre MEI vs Aut√¥nomo

**4. Mensalidade de Carn√™-Le√£o (para aut√¥nomos)**
- C√°lculo autom√°tico mensal
- Gera√ß√£o de DARF
- Hist√≥rico de pagamentos

**Design:**
- Interface simples e clara
- Wizard guiado para primeira vez
- Possibilidade de contratar contador parceiro (monetiza√ß√£o futura)

#### 2.6.3 Comparativo de Plataformas (NOVO)
**Tela dedicada para an√°lise de rentabilidade por app**

**Visualiza√ß√µes:**

**1. Ranking de Rentabilidade**
- Tabela ordenada:
  | Plataforma | Faturamento | Lucro | Corridas | Lucro/Corrida |
- Destaque para a mais lucrativa

**2. Gr√°ficos Comparativos**
- Barras: faturamento total por plataforma
- Pizza: distribui√ß√£o percentual
- Linha: evolu√ß√£o mensal por plataforma

**3. Insights Autom√°ticos**
- "Uber representa 65% do seu faturamento"
- "99 tem melhor lucro m√©dio por corrida: R$ 25"
- "inDrive teve crescimento de 30% este m√™s"

**4. Recomenda√ß√µes**
- "Considere focar mais em [Plataforma X] nas quintas-feiras"
- "Voc√™ trabalha pouco com [Plataforma Y] que tem boas avalia√ß√µes"

#### 2.6.4 Alertas Inteligentes (Sistema Proativo)
**Algoritmo de Monitoramento Cont√≠nuo**

**Tipos de Alertas:**

**1. Alertas de Performance**
- üìâ "Seu lucro/km caiu 15% esta semana"
- üìà "Voc√™ est√° tendo sua melhor semana do m√™s!"
- ‚ö†Ô∏è "Gastos com combust√≠vel 20% acima da m√©dia"

**2. Alertas de Oportunidade**
- üí° "Segundas-feiras s√£o 18% mais lucrativas para voc√™"
- üéØ "Faltam apenas R$ 85 para sua meta semanal"
- ‚è∞ "Seus melhores hor√°rios: 17h-21h"

**3. Alertas de Manuten√ß√£o**
- üîß "Atingiu 5.000km desde √∫ltimo registro de manuten√ß√£o"
- üõû "Pr√≥xima troca de √≥leo estimada em 200km"

**4. Alertas Comparativos (Benchmark)**
- üìä "Motoristas da sua regi√£o faturam 12% a mais √†s sextas"
- üöó "Seu lucro/km est√° 8% acima da m√©dia local"

**Configura√ß√£o:**
- Frequ√™ncia de alertas (di√°rio, semanal)
- Tipos de alertas ativos
- Canal (push, e-mail, in-app)

**Interface:**
- Central de notifica√ß√µes no header
- Badge com n√∫mero de alertas n√£o lidos
- Hist√≥rico de alertas
- A√ß√£o r√°pida em cada alerta

#### 2.6.5 Benchmarking An√¥nimo (NOVO - Gamifica√ß√£o)
**Recurso Premium / Fase 2**

**Funcionalidade:**
- Compara√ß√£o an√¥nima com outros motoristas
- Filtros: mesma cidade, mesmo tipo de ve√≠culo, mesma plataforma
- M√©tricas comparadas:
  - Lucro m√©dio di√°rio
  - Lucro por km
  - Efici√™ncia operacional (lucro/gastos)
  - Dias trabalhados por m√™s

**Visualiza√ß√£o:**
- Gr√°fico de distribui√ß√£o (onde voc√™ se posiciona)
- Percentil: "Voc√™ est√° no top 25% de motoristas da sua regi√£o"
- Evolu√ß√£o do ranking ao longo do tempo

**Privacidade:**
- Dados 100% an√¥nimos
- Opt-in volunt√°rio
- Pode desativar a qualquer momento

**Gamifica√ß√£o:**
- Conquistas desbloque√°veis:
  - üèÜ "Top 10% do m√™s"
  - üéØ "10 dias consecutivos atingindo meta"
  - üìà "Crescimento de 20% no trimestre"
  - ‚≠ê "100 dias trabalhados"
- Badge no perfil
- Compartilhamento social (opcional)

---

### 2.7 Exporta√ß√£o e Integra√ß√£o de Dados

#### 2.7.1 Exporta√ß√£o Avan√ßada
**Formatos Dispon√≠veis:**
- **Excel (.xlsx):** planilha formatada com gr√°ficos
- **CSV:** dados brutos para an√°lise externa
- **PDF:** relat√≥rio visual e profissional
- **JSON:** para integra√ß√µes (API)

**Op√ß√µes de Exporta√ß√£o:**
- Per√≠odo personalizado
- Filtros aplicados
- Colunas selecionadas
- Incluir/excluir gr√°ficos
- Modelo de relat√≥rio (simples, detalhado, fiscal)

**Templates de Relat√≥rio:**
1. **Relat√≥rio Mensal Completo**
   - Resumo executivo
   - Gr√°ficos principais
   - Tabela de registros
   - An√°lise de tend√™ncias

2. **Relat√≥rio de Gastos**
   - Breakdown detalhado de categorias
   - Comparativo com m√™s anterior
   - Recomenda√ß√µes de economia

3. **Relat√≥rio Fiscal (IR)**
   - Formato adequado para contador
   - Receitas e despesas segregadas
   - Documenta√ß√£o de suporte

4. **Extrato para Financiamento**
   - Comprova√ß√£o de renda
   - Hist√≥rico de 3-12 meses
   - M√©dias e totais

#### 2.7.2 Importa√ß√£o de Dados (NOVO - Facilitar Migra√ß√£o)
**Formatos Aceitos:**
- Excel (.xlsx, .xls)
- CSV
- Google Sheets (link p√∫blico)

**Processo:**
1. Upload do arquivo
2. Mapeamento de colunas:
   - Data ‚Üí coluna X
   - Faturamento ‚Üí coluna Y
   - etc.
3. Preview dos dados
4. Valida√ß√£o autom√°tica
5. Confirma√ß√£o e importa√ß√£o

**Valida√ß√µes:**
- Datas v√°lidas e n√£o duplicadas
- Valores num√©ricos positivos
- Campos obrigat√≥rios preenchidos

**Feedback:**
- Barra de progresso
- Relat√≥rio de importa√ß√£o:
  - X registros importados com sucesso
  - Y registros com erro (lista de erros)
- Op√ß√£o de rollback em caso de problema

---

## 3. Requisitos T√©cnicos Aprimorados

### 3.1 Frontend

**Stack Recomendada (Moderna):**
- **Framework:** Next.js 14+ (App Router)
  - Server Components para performance
  - API Routes integradas
  - Otimiza√ß√£o autom√°tica de imagens
  
- **UI/Styling:**
  - Tailwind CSS 3+ (utility-first)
  - shadcn/ui (componentes prontos e customiz√°veis)
  - Framer Motion (anima√ß√µes fluidas)
  
- **Gr√°ficos:**
  - Recharts (gr√°ficos responsivos React)
  - Chart.js + react-chartjs-2 (alternativa)
  - D3.js para visualiza√ß√µes complexas (Fase 2)
  
- **Formul√°rios:**
  - React Hook Form (performance)
  - Zod (valida√ß√£o TypeScript-first)
  
- **Estado:**
  - Zustand ou Jotai (state management leve)
  - React Query/TanStack Query (cache de dados)
  
- **Requisi√ß√µes:**
  - Axios com interceptors
  - SWR (React Hooks para data fetching)

**Progressive Web App (PWA):**
- Manifest.json configurado
- Service Worker para offline
- Instal√°vel no celular
- √çcones em todas resolu√ß√µes
- Splash screens customizadas

**Performance:**
- Lighthouse score > 90
- First Contentful Paint < 1.5s
- Time to Interactive < 3s
- Lazy loading de componentes pesados
- Code splitting por rota
- Image optimization (WebP, AVIF)
- Bundle size analysis

**Responsividade:**
- Mobile-first (design prioriza mobile)
- Breakpoints Tailwind:
  - sm: 640px (mobile landscape)
  - md: 768px (tablet)
  - lg: 1024px (desktop)
  - xl: 1280px (large desktop)
  - 2xl: 1536px (extra large)
- Touch-friendly (bot√µes min 44x44px)
- Gestures (swipe, long-press)

### 3.2 Backend

**Stack Recomendada:**
- **Runtime:** Node.js 20+ LTS
- **Framework:** 
  - Fastify (performance superior) OU
  - Express com Helmet/Morgan
  - NestJS (para projetos maiores/escal√°veis)
  
- **Banco de Dados:**
  - **Principal:** PostgreSQL 15+
    - Relacionamentos complexos
    - JSONB para dados flex√≠veis
    - Full-text search
    - Views materializadas para relat√≥rios
  - **Cache:** Redis
    - Cache de sess√µes
    - Rate limiting
    - Filas de jobs (Bull/BullMQ)
  
- **ORM/Query Builder:**
  - Prisma (type-safe, migrations, studio)
  - TypeORM (alternativa robusta)
  - Knex.js (query builder leve)

**Autentica√ß√£o & Seguran√ßa:**
- **JWT (JSON Web Tokens)**
  - Access token: 15 minutos
  - Refresh token: 7 dias
  - Token rotation
  - Blacklist de tokens revogados (Redis)
  
- **Bcrypt:** hash de senhas
  - Salt rounds: 12 (seguran√ßa elevada)
  
- **Rate Limiting:**
  - Login: 5 tentativas / 15 min
  - API geral: 100 req/min
  - Endpoints cr√≠ticos: 10 req/min
  
- **Headers de Seguran√ßa:**
  - Helmet.js configurado
  - CORS restritivo
  - Content-Security-Policy
  - HSTS (HTTP Strict Transport Security)
  
- **Valida√ß√£o de Inputs:**
  - Joi ou Zod no backend
  - Sanitiza√ß√£o contra XSS
  - Prote√ß√£o SQL Injection (ORM parameterizado)
  - Upload de arquivos: valida√ß√£o de tipo/tamanho

**APIs RESTful + WebSockets:**

```
# Autentica√ß√£o
POST   /api/v1/auth/register
POST   /api/v1/auth/login
POST   /api/v1/auth/refresh
POST   /api/v1/auth/logout
POST   /api/v1/auth/forgot-password
POST   /api/v1/auth/reset-password
GET    /api/v1/auth/me
PUT    /api/v1/auth/verify-email/:token

# Usu√°rios
GET    /api/v1/users/profile
PUT    /api/v1/users/profile
PUT    /api/v1/users/password
PUT    /api/v1/users/preferences
DELETE /api/v1/users/account
POST   /api/v1/users/avatar

# Registros Di√°rios
GET    /api/v1/records                # Lista paginada
POST   /api/v1/records                # Criar
GET    /api/v1/records/:id            # Detalhes
PUT    /api/v1/records/:id            # Atualizar
DELETE /api/v1/records/:id            # Excluir
POST   /api/v1/records/bulk           # Importa√ß√£o em massa
POST   /api/v1/records/:id/duplicate  # Duplicar registro

# Estat√≠sticas
GET    /api/v1/stats/dashboard        # Dados do dashboard
GET    /api/v1/stats/monthly          # Estat√≠sticas do m√™s
GET    /api/v1/stats/period           # Per√≠odo customizado
GET    /api/v1/stats/total            # Acumulado total
GET    /api/v1/stats/comparative      # Comparativos mensais
GET    /api/v1/stats/platform         # Por plataforma

# Gr√°ficos
GET    /api/v1/charts/evolution       # Evolu√ß√£o financeira
GET    /api/v1/charts/daily           # Comparativo di√°rio
GET    /api/v1/charts/expenses        # Distribui√ß√£o de gastos
GET    /api/v1/charts/platform        # Performance por plataforma
GET    /api/v1/charts/heatmap         # Heatmap de rentabilidade

# Metas
GET    /api/v1/goals                  # Listar metas
POST   /api/v1/goals                  # Criar meta
GET    /api/v1/goals/:id              # Detalhes
PUT    /api/v1/goals/:id              # Atualizar
DELETE /api/v1/goals/:id              # Excluir
GET    /api/v1/goals/current/progress # Progresso da meta atual

# Alertas
GET    /api/v1/alerts                 # Listar alertas
GET    /api/v1/alerts/:id             # Detalhes
PUT    /api/v1/alerts/:id/read        # Marcar como lido
DELETE /api/v1/alerts/:id             # Excluir

# Relat√≥rios
POST   /api/v1/reports/generate       # Gerar relat√≥rio
GET    /api/v1/reports/:id/download   # Download
GET    /api/v1/reports/ir             # Relat√≥rio fiscal IR

# Exporta√ß√£o/Importa√ß√£o
POST   /api/v1/export                 # Exportar dados
POST   /api/v1/import                 # Importar dados
GET    /api/v1/import/:id/status      # Status da importa√ß√£o

# Benchmarking (Fase 2)
GET    /api/v1/benchmark/stats        # Estat√≠sticas an√¥nimas
GET    /api/v1/benchmark/ranking      # Posi√ß√£o no ranking
GET    /api/v1/benchmark/achievements # Conquistas

# WebSocket (real-time)
WS     /api/v1/ws                     # Conex√£o WebSocket
       - Eventos: record_created, goal_achieved, alert_new
```

**Estrutura do Projeto (Backend):**
```
src/
‚îú‚îÄ‚îÄ config/          # Configura√ß√µes (DB, JWT, etc)
‚îú‚îÄ‚îÄ controllers/     # L√≥gica de controle
‚îú‚îÄ‚îÄ middlewares/     # Auth, validation, error handling
‚îú‚îÄ‚îÄ models/          # Models do Prisma/TypeORM
‚îú‚îÄ‚îÄ routes/          # Defini√ß√£o de rotas
‚îú‚îÄ‚îÄ services/        # L√≥gica de neg√≥cio
‚îú‚îÄ‚îÄ utils/           # Fun√ß√µes auxiliares
‚îú‚îÄ‚îÄ validators/      # Schemas de valida√ß√£o
‚îú‚îÄ‚îÄ jobs/            # Background jobs (e-mails, relat√≥rios)
‚îî‚îÄ‚îÄ tests/           # Testes unit√°rios e integra√ß√£o
```

### 3.3 Banco de Dados

**Schema PostgreSQL Completo:**

```sql
-- Tabela: users
CREATE TABLE users (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name VARCHAR(255) NOT NULL,
    email VARCHAR(255) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    phone VARCHAR(20),
    city VARCHAR(100),
    state VARCHAR(2),
    photo_url TEXT,
    vehicle_type VARCHAR(50),
    start_year INTEGER,
    platforms JSONB DEFAULT '[]'::JSONB,
    preferences JSONB DEFAULT '{}'::JSONB,
    email_verified BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW(),
    deleted_at TIMESTAMP
);

-- Tabela: records (registros di√°rios)
CREATE TABLE records (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    date DATE NOT NULL,
    platforms JSONB DEFAULT '[]'::JSONB, -- ["uber", "99"]
    revenue DECIMAL(10,2) NOT NULL, -- faturamento
    expenses DECIMAL(10,2) NOT NULL, -- gastos totais
    kilometers DECIMAL(8,2) NOT NULL,
    profit DECIMAL(10,2) GENERATED ALWAYS AS (revenue - expenses) STORED,
    margin DECIMAL(5,2) GENERATED ALWAYS AS (
        CASE WHEN revenue > 0 
        THEN ((revenue - expenses) / revenue * 100) 
        ELSE 0 END
    ) STORED,
    profit_per_km DECIMAL(6,2) GENERATED ALWAYS AS (
        CASE WHEN kilometers > 0 
        THEN ((revenue - expenses) / kilometers) 
        ELSE 0 END
    ) STORED,
    
    -- Detalhamento de ganhos por plataforma
    revenue_breakdown JSONB DEFAULT '{}'::JSONB,
    -- Ex: {"uber": 200.00, "99": 150.00}
    
    -- Detalhamento de gastos
    expense_fuel DECIMAL(10,2) DEFAULT 0,
    expense_maintenance DECIMAL(10,2) DEFAULT 0,
    expense_food DECIMAL(10,2) DEFAULT 0,
    expense_wash DECIMAL(10,2) DEFAULT 0,
    expense_toll DECIMAL(10,2) DEFAULT 0,
    expense_parking DECIMAL(10,2) DEFAULT 0,
    expense_other DECIMAL(10,2) DEFAULT 0,
    
    -- Informa√ß√µes complementares
    trips_count INTEGER,
    hours_worked DECIMAL(4,2),
    start_time TIME,
    end_time TIME,
    notes TEXT,
    
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW(),
    
    UNIQUE(user_id, date)
);

-- Tabela: goals (metas)
CREATE TABLE goals (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    type VARCHAR(20) NOT NULL, -- 'monthly', 'weekly', 'custom'
    target_value DECIMAL(10,2) NOT NULL,
    target_period DATE NOT NULL, -- m√™s/semana de refer√™ncia
    current_value DECIMAL(10,2) DEFAULT 0,
    achieved BOOLEAN DEFAULT FALSE,
    achieved_at TIMESTAMP,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

-- Tabela: alerts (alertas inteligentes)
CREATE TABLE alerts (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    type VARCHAR(50) NOT NULL, -- 'performance', 'opportunity', 'maintenance'
    title VARCHAR(255) NOT NULL,
    message TEXT NOT NULL,
    severity VARCHAR(20) DEFAULT 'info', -- 'info', 'warning', 'success'
    read BOOLEAN DEFAULT FALSE,
    action_url TEXT,
    created_at TIMESTAMP DEFAULT NOW()
);

-- Tabela: password_resets
CREATE TABLE password_resets (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    email VARCHAR(255) NOT NULL,
    token VARCHAR(255) NOT NULL UNIQUE,
    expires_at TIMESTAMP NOT NULL,
    used BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT NOW()
);

-- Tabela: refresh_tokens
CREATE TABLE refresh_tokens (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    token VARCHAR(500) NOT NULL UNIQUE,
    expires_at TIMESTAMP NOT NULL,
    revoked BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT NOW()
);

-- Tabela: audit_logs (auditoria)
CREATE TABLE audit_logs (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id) ON DELETE SET NULL,
    action VARCHAR(100) NOT NULL, -- 'login', 'create_record', 'delete_record'
    entity_type VARCHAR(50),
    entity_id UUID,
    ip_address VARCHAR(45),
    user_agent TEXT,
    created_at TIMESTAMP DEFAULT NOW()
);

-- √çndices para performance
CREATE INDEX idx_records_user_date ON records(user_id, date DESC);
CREATE INDEX idx_records_user_created ON records(user_id, created_at DESC);
CREATE INDEX idx_goals_user_period ON goals(user_id, target_period);
CREATE INDEX idx_alerts_user_unread ON alerts(user_id, read) WHERE read = FALSE;
CREATE INDEX idx_users_email ON users(email);

-- View materializada para estat√≠sticas (performance)
CREATE MATERIALIZED VIEW user_stats_monthly AS
SELECT 
    user_id,
    DATE_TRUNC('month', date) as month,
    COUNT(*) as days_worked,
    SUM(revenue) as total_revenue,
    SUM(expenses) as total_expenses,
    SUM(profit) as total_profit,
    AVG(profit) as avg_daily_profit,
    SUM(kilometers) as total_kilometers,
    AVG(profit_per_km) as avg_profit_per_km
FROM records
GROUP BY user_id, DATE_TRUNC('month', date);

CREATE UNIQUE INDEX ON user_stats_monthly (user_id, month);

-- Trigger para atualizar updated_at automaticamente
CREATE OR REPLACE FUNCTION update_updated_at()
RETURNS TRIGGER AS $
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$ LANGUAGE plpgsql;

CREATE TRIGGER users_updated_at BEFORE UPDATE ON users
    FOR EACH ROW EXECUTE FUNCTION update_updated_at();
    
CREATE TRIGGER records_updated_at BEFORE UPDATE ON records
    FOR EACH ROW EXECUTE FUNCTION update_updated_at();
```

**Otimiza√ß√µes de Performance:**
- Indexes compostos para queries frequentes
- Colunas calculadas (GENERATED) para m√©tricas
- Views materializadas para agrega√ß√µes pesadas
- Particionamento por data (Fase 2, quando scale)
- VACUUM e ANALYZE autom√°ticos
- Connection pooling (pg-pool)

### 3.4 Infraestrutura e DevOps

**Hosting Recomendado:**

**Op√ß√£o 1 - Full Stack Serverless (MVP):**
- **Frontend:** Vercel
  - Deploy autom√°tico via Git
  - Edge Network global
  - Serverless Functions para API routes
  
- **Backend:** Railway ou Render
  - Deploy via Docker
  - Auto-scaling
  - Logs integrados
  
- **Banco de Dados:** Supabase ou Neon
  - PostgreSQL gerenciado
  - Backups autom√°ticos
  - Connection pooling
  
**Op√ß√£o 2 - Cloud Provider (Escalabilidade):**
- **AWS:**
  - EC2/ECS para backend
  - RDS PostgreSQL
  - S3 para arquivos
  - CloudFront CDN
  - Route53 DNS
  
- **OU Google Cloud Platform:**
  - Cloud Run (containers)
  - Cloud SQL
  - Cloud Storage
  - Cloud CDN

**Servi√ßos Adicionais:**
- **Storage de Imagens:** Cloudinary
  - Upload direto do cliente
  - Transforma√ß√£o autom√°tica
  - CDN integrado
  
- **E-mail Transacional:** 
  - Resend (moderno, developer-friendly)
  - SendGrid (robusto, escal√°vel)
  - AWS SES (custo-benef√≠cio)
  
- **Monitoramento:**
  - **Erros:** Sentry
    - Source maps
    - Release tracking
    - Performance monitoring
  - **Analytics:** 
    - Google Analytics 4
    - Mixpanel (eventos)
    - Hotjar (heatmaps)
  - **Uptime:** UptimeRobot ou Pingdom
  - **APM:** New Relic ou Datadog
  
- **Logs:** 
  - Papertrail ou Logtail
  - Structured logging (JSON)
  - Log aggregation

**CI/CD Pipeline:**
- GitHub Actions ou GitLab CI
- Stages:
  1. Lint (ESLint, Prettier)
  2. Type check (TypeScript)
  3. Tests (Jest, Vitest)
  4. Build
  5. Deploy to staging
  6. Deploy to production (ap√≥s aprova√ß√£o)
  
**Ambientes:**
- Development (local)
- Staging (pre-production)
- Production

**Backup Strategy:**
- **Database:**
  - Backups di√°rios autom√°ticos (7 dias)
  - Backups semanais (4 semanas)
  - Backups mensais (12 meses)
  - Point-in-time recovery
  
- **Arquivos:**
  - Replica√ß√£o autom√°tica (S3, Cloudinary)
  
**Disaster Recovery:**
- RTO (Recovery Time Objective): < 4 horas
- RPO (Recovery Point Objective): < 1 hora
- Documenta√ß√£o de procedimentos
- Testes trimestrais

### 3.5 Seguran√ßa em Profundidade

**Camadas de Seguran√ßa:**

**1. Aplica√ß√£o:**
- Input validation (frontend + backend)
- Output encoding (prevenir XSS)
- CSRF tokens
- SQL Injection prevention (ORM)
- Secrets em vari√°veis de ambiente (.env)
- Depend√™ncias atualizadas (Dependabot)

**2. Autentica√ß√£o:**
- Senhas com bcrypt (salt rounds: 12)
- JWT com expira√ß√£o curta
- Refresh token rotation
- Rate limiting em login
- Account lockout ap√≥s tentativas falhas
- 2FA (Fase 2)

**3. Autoriza√ß√£o:**
- RBAC (Role-Based Access Control)
- Valida√ß√£o de ownership (user_id)
- Princ√≠pio do menor privil√©gio

**4. Rede:**
- HTTPS obrigat√≥rio (SSL/TLS 1.3)
- HSTS habilitado
- Firewall configurado
- IP whitelisting para admin

**5. Dados:**
- Criptografia em repouso (database)
- Criptografia em tr√¢nsito (HTTPS)
- Logs sem dados sens√≠veis
- GDPR/LGPD compliance
- Anonimiza√ß√£o em backups antigos

**6. Compliance:**
- **LGPD (Lei Geral de Prote√ß√£o de Dados):**
  - Consentimento expl√≠cito
  - Direito ao esquecimento
  - Portabilidade de dados
  - Pol√≠tica de Privacidade clara
  - Termos de Uso
  
- **PCI DSS (se processar pagamentos futuros):**
  - Nunca armazenar dados de cart√£o
  - Usar gateway certificado

**Auditorias:**
- Penetration testing (anual)
- Vulnerability scans (mensal)
- Code review de seguran√ßa
- Security headers check

---

## 4. Design e UX Aprimorado

### 4.1 Design System

**Paleta de Cores Expandida:**

**Cores Principais:**
- **Primary:** #6366F1 (Indigo-500)
  - Hover: #4F46E5 (Indigo-600)
  - Light: #818CF8 (Indigo-400)
  - Dark: #4338CA (Indigo-700)
  
- **Secondary:** #06B6D4 (Cyan-500)
  - Hover: #0891B2 (Cyan-600)
  
- **Success:** #10B981 (Green-500)
  - Light: #34D399 (Green-400)
  - Dark: #059669 (Green-600)
  
- **Danger:** #EF4444 (Red-500)
  - Light: #F87171 (Red-400)
  - Dark: #DC2626 (Red-600)
  
- **Warning:** #F59E0B (Amber-500)
  - Light: #FBBF24 (Amber-400)
  
- **Info:** #3B82F6 (Blue-500)

**Cores Neutras (Gray Scale):**
- 50: #F9FAFB
- 100: #F3F4F6
- 200: #E5E7EB
- 300: #D1D5DB
- 400: #9CA3AF
- 500: #6B7280
- 600: #4B5563
- 700: #374151
- 800: #1F2937
- 900: #111827

**Cores de Fundo:**
- Background (light): #F9FAFB (Gray-50)
- Background (dark): #111827 (Gray-900)
- Surface (light): #FFFFFF
- Surface (dark): #1F2937 (Gray-800)
- Overlay: rgba(0,0,0,0.5)

**Gradientes:**
```css
.gradient-primary {
  background: linear-gradient(135deg, #6366F1 0%, #818CF8 100%);
}

.gradient-success {
  background: linear-gradient(135deg, #10B981 0%, #34D399 100%);
}

.gradient-danger {
  background: linear-gradient(135deg, #EF4444 0%, #F87171 100%);
}

.gradient-card {
  background: linear-gradient(135deg, #FFFFFF 0%, #F9FAFB 100%);
}
```

### 4.2 Tipografia

**Fonte Principal:** Inter (Google Fonts)
- Fallback: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto

**Escala Tipogr√°fica:**
- **Display:** 3.5rem (56px) / 1.1 line-height - T√≠tulos de landing
- **H1:** 2.5rem (40px) / 1.2 - T√≠tulos principais
- **H2:** 2rem (32px) / 1.3 - Subt√≠tulos grandes
- **H3:** 1.5rem (24px) / 1.4 - Subt√≠tulos m√©dios
- **H4:** 1.25rem (20px) / 1.4 - Subt√≠tulos pequenos
- **Body Large:** 1.125rem (18px) / 1.6 - Textos destacados
- **Body:** 1rem (16px) / 1.6 - Texto padr√£o
- **Body Small:** 0.875rem (14px) / 1.5 - Textos secund√°rios
- **Caption:** 0.75rem (12px) / 1.4 - Labels, legendas

**Pesos:**
- Regular: 400
- Medium: 500
- Semibold: 600
- Bold: 700

**Classes Tailwind:**
```html
<h1 class="text-4xl font-bold">T√≠tulo Principal</h1>
<p class="text-base font-normal leading-relaxed">Par√°grafo</p>
<span class="text-sm text-gray-500">Secund√°rio</span>
```

### 4.3 Espa√ßamento e Grid

**Sistema de Espa√ßamento (4px base):**
- 0: 0px
- 1: 4px
- 2: 8px
- 3: 12px
- 4: 16px
- 6: 24px
- 8: 32px
- 10: 40px
- 12: 48px
- 16: 64px
- 20: 80px
- 24: 96px

**Grid System:**
- Container max-width:
  - sm: 640px
  - md: 768px
  - lg: 1024px
  - xl: 1280px
  - 2xl: 1536px
  
- Gutters: 24px (desktop), 16px (mobile)

**Layout Patterns:**
- Se√ß√µes: py-16 (64px) ou py-20 (80px)
- Cards: p-6 (24px)
- Forms: gap-4 (16px entre campos)

### 4.4 Componentes UI

**Bot√µes:**
```tsx
// Prim√°rio
<button className="
  px-6 py-3
  bg-indigo-600 hover:bg-indigo-700
  text-white font-semibold
  rounded-lg
  shadow-md hover:shadow-lg
  transition-all duration-200
  active:scale-95
">
  A√ß√£o Principal
</button>

// Secund√°rio
<button className="
  px-6 py-3
  border-2 border-indigo-600
  text-indigo-600 hover:bg-indigo-50
  font-semibold
  rounded-lg
  transition-all duration-200
">
  A√ß√£o Secund√°ria
</button>

// Destructivo
<button className="
  px-6 py-3
  bg-red-600 hover:bg-red-700
  text-white
  rounded-lg
  transition-all
">
  Excluir
</button>
```

**Inputs:**
```tsx
<div className="space-y-2">
  <label className="block text-sm font-medium text-gray-700">
    E-mail
  </label>
  <input 
    type="email"
    className="
      w-full px-4 py-3
      border border-gray-300
      rounded-lg
      focus:ring-2 focus:ring-indigo-500 focus:border-transparent
      transition-all
      placeholder:text-gray-400
    "
    placeholder="seu@email.com"
  />
</div>
```

**Cards:**
```tsx
<div className="
  bg-white
  rounded-xl
  shadow-md hover:shadow-xl
  p-6
  transition-all duration-300
  border border-gray-100
">
  {/* Card content */}
</div>
```

**Badges:**
```tsx
// Success
<span className="
  inline-flex items-center
  px-3 py-1
  rounded-full
  text-sm font-medium
  bg-green-100 text-green-800
">
  ‚úì Ativo
</span>

// Warning
<span className="
  px-3 py-1 rounded-full text-sm
  bg-amber-100 text-amber-800
">
  ‚ö† Aten√ß√£o
</span>
```

**Tooltips:**
- Usar Radix UI ou Headless UI
- Anima√ß√£o suave (fade + slide)
- Delay de 300ms
- M√°x 200px largura

**Modals:**
- Overlay escuro (opacity-50)
- Anima√ß√£o: scale + fade
- Fechar ao clicar fora ou ESC
- Trap focus dentro do modal
- Max-width: 600px

### 4.5 Anima√ß√µes e Micro-intera√ß√µes

**Transi√ß√µes Padr√£o:**
```css
.transition-default {
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.transition-smooth {
  transition: all 0.3s ease-in-out;
}
```

**Anima√ß√µes com Framer Motion:**
```tsx
// Fade in ao carregar
<motion.div
  initial={{ opacity: 0, y: 20 }}
  animate={{ opacity: 1, y: 0 }}
  transition={{ duration: 0.4 }}
>
  {content}
</motion.div>

// Contador animado
<AnimatedNumber value={1250.50} duration={1000} />

// Skeleton loader
<motion.div
  className="h-4 bg-gray-200 rounded"
  animate={{ opacity: [0.5, 1, 0.5] }}
  transition={{ duration: 1.5, repeat: Infinity }}
/>
```

**Hover States:**
- Bot√µes: eleva√ß√£o + cor mais escura
- Cards: eleva√ß√£o sutil
- Links: underline animado
- √çcones: rotate ou scale

**Loading States:**
- Spinners para a√ß√µes r√°pidas
- Skeleton screens para carregamento de p√°gina
- Progress bars para uploads
- Pulse animation para placeholders

**Success Feedback:**
- Checkmark animado (draw animation)
- Toast notification
- Confetti para conquistas (canvas-confetti)

### 4.6 Dark Mode

**Implementa√ß√£o:**
- Toggle no header
- Salvar prefer√™ncia no localStorage
- Respeitar prefer√™ncia do sistema
- Transi√ß√£o suave entre temas

**Cores Dark Mode:**
```css
:root[data-theme="dark"] {
  --bg-primary: #111827;
  --bg-secondary: #1F2937;
  --text-primary: #F9FAFB;
  --text-secondary: #9CA3AF;
  --border: #374151;
}
```

**Ajustes de Componentes:**
- Cards: bg-gray-800 (dark)
- Inputs: bg-gray-700, border-gray-600
- Sombras menos intensas
- Contrast ratios mantidos (WCAG AA)

### 4.7 Acessibilidade (A11y)

**Checklist:**
- ‚úÖ Contrast ratio m√≠nimo 4.5:1 (WCAG AA)
- ‚úÖ Todos inputs com labels
- ‚úÖ Focus visible em todos elementos interativos
- ‚úÖ Navega√ß√£o por teclado funcional
- ‚úÖ ARIA labels onde necess√°rio
- ‚úÖ Alt text em todas imagens
- ‚úÖ Hierarquia de headings correta (H1 > H2 > H3)
- ‚úÖ Skip to main content link
- ‚úÖ Error messages descritivas
- ‚úÖ Loading states anunciados (aria-live)
- ‚úÖ Modals com trap focus
- ‚úÖ Formul√°rios com error recovery

**Screen Readers:**
- Testar com NVDA (Windows) e VoiceOver (Mac)
- Landmark regions definidas
- An√∫ncios de mudan√ßas din√¢micas

**Keyboard Navigation:**
- Tab order l√≥gico
- Enter/Space para ativar
- Esc para fechar modals
- Arrow keys em listas/menus

---

## 5. Fluxos de Usu√°rio Detalhados

### 5.1 Onboarding Completo (Primeiro Acesso)

**1. Landing Page ‚Üí Cadastro**
- Usu√°rio clica em "Come√ßar Gr√°tis"
- Redirecionado para formul√°rio de cadastro
- Preenche dados em 3 passos
- Recebe e-mail de boas-vindas

**2. Primeiro Login ‚Üí Tutorial Interativo**
- Dashboard vazio com overlay
- Tour guiado (usando Intro.js ou similar):
  - Step 1: "Bem-vindo! Aqui est√° seu dashboard"
  - Step 2: "Clique em + Novo Registro para come√ßar"
  - Step 3: "Defina suas metas aqui"
  - Step 4: "Acompanhe gr√°ficos e estat√≠sticas"
- Op√ß√£o de pular tutorial
- Call-to-action: "Registrar Primeiro Dia"

**3. Primeiro Registro**
- Modal abre automaticamente
- Campos com placeholders explicativos
- Tooltips inline: "?" com explica√ß√µes
- Pr√©-visualiza√ß√£o do lucro em destaque
- Ap√≥s salvar: anima√ß√£o de sucesso + confetti
- Prompt: "Quer configurar sua meta mensal?"

**4. Configura√ß√£o de Meta (Opcional)**
- Wizard de 2 passos:
  - Define valor da meta
  - Confirma dias de trabalho esperados
- Sugest√£o baseada em primeiro registro
- Ap√≥s configurar: voltar ao dashboard atualizado

### 5.2 Uso Di√°rio T√≠pico (Motorista Experiente)

**Cen√°rio: Fim do dia de trabalho**

**1. Acesso R√°pido**
- Motorista abre app no celular
- Autentica√ß√£o biom√©trica (se ativada)
- Dashboard carrega instantaneamente (dados em cache)

**2. Registro R√°pido do Dia**
- Clica em "‚ûï Novo Registro" (bot√£o sempre vis√≠vel)
- Modal abre com data pr√©-preenchida (hoje)
- Preenche rapidamente:
  - Faturamento: R$ XXX (do app de corrida)
  - Quilometragem: XXX km (do od√¥metro)
  - Gastos: R$ XXX (combust√≠vel + alimenta√ß√£o)
- Pr√©-visualiza√ß√£o mostra lucro em tempo real
- Clica em "Salvar" (< 30 segundos total)
- Toast de confirma√ß√£o aparece
- Dashboard atualiza automaticamente

**3. Verifica√ß√£o R√°pida**
- Olha o banner de meta: "78% conclu√≠do"
- Verifica se bateu meta di√°ria
- Se sim, celebra√ß√£o visual üéâ
- Se n√£o, v√™ quanto falta: "Faltam R$ 85"

**4. Insights do Dia (Opcional)**
- L√™ insights personalizados: "Ter√ßas s√£o seus melhores dias"
- Verifica alertas: "Gastos com combust√≠vel 12% acima da m√©dia"
- Toma decis√£o para amanh√£ baseado em dados

---

### 5.3 Roadmap de Implementa√ß√£o

#### Fase 1 - MVP (M√≠nimo Produto Vi√°vel) - 8-12 semanas
**Prioridade: Alta - Funcionalidades Essenciais**

**Sprint 1-2 (2 semanas):**
- ‚úÖ Autentica√ß√£o completa (login, registro, recupera√ß√£o)
- ‚úÖ Dashboard b√°sico com 4 cards principais
- ‚úÖ Formul√°rio de registro di√°rio simplificado
- ‚úÖ Listagem de registros (tabela b√°sica)
- ‚úÖ Perfil do usu√°rio b√°sico

**Sprint 3-4 (2 semanas):**
- ‚úÖ Gr√°ficos b√°sicos (evolu√ß√£o financeira, distribui√ß√£o de gastos)
- ‚úÖ Estat√≠sticas detalhadas (m√™s atual, totais)
- ‚úÖ Edi√ß√£o e exclus√£o de registros
- ‚úÖ Sistema de combust√≠vel e manuten√ß√£o (j√° implementado)

**Sprint 5-6 (2 semanas):**
- ‚úÖ Sistema de metas mensais b√°sico
- ‚úÖ Banner de meta no dashboard
- ‚úÖ C√°lculos avan√ßados (custo/km, lucro/km)
- ‚úÖ Exporta√ß√£o b√°sica (CSV)

**Sprint 7-8 (2 semanas):**
- ‚úÖ Refinamento de UI/UX
- ‚úÖ Responsividade mobile completa
- ‚úÖ Testes de integra√ß√£o
- ‚úÖ Deploy em produ√ß√£o

#### Fase 2 - Funcionalidades Avan√ßadas - 6-8 semanas
**Prioridade: M√©dia - Diferenciais Competitivos**

**Sprint 9-10 (2 semanas):**
- Sistema de alertas inteligentes
- Insights personalizados b√°sicos
- Comparativo de plataformas
- Hist√≥rico de metas

**Sprint 11-12 (2 semanas):**
- Relat√≥rios fiscais para IR
- Exporta√ß√£o avan√ßada (PDF, Excel)
- Importa√ß√£o de dados
- Gr√°ficos avan√ßados (heatmap, performance por plataforma)

**Sprint 13-14 (2 semanas):**
- Sistema de notifica√ß√µes (e-mail)
- Prefer√™ncias do usu√°rio avan√ßadas
- Dark mode
- Otimiza√ß√µes de performance

#### Fase 3 - Recursos Premium - 8-12 semanas
**Prioridade: Baixa - Monetiza√ß√£o e Escala**

**Sprint 15-18 (4 semanas):**
- Captura autom√°tica de dados (Android)
- Benchmarking an√¥nimo
- Sistema de conquistas
- API p√∫blica para integra√ß√µes

**Sprint 19-22 (4 semanas):**
- App mobile nativo (React Native)
- Push notifications
- Modo offline completo
- Sincroniza√ß√£o em tempo real

**Sprint 23-24 (2 semanas):**
- Integra√ß√£o com contadores parceiros
- Sistema de assinaturas (Premium)
- Analytics avan√ßado para usu√°rios Premium
- Suporte multi-idioma

---

## 6. M√©tricas de Sucesso e KPIs

### 6.1 M√©tricas de Produto

**Engajamento:**
- Taxa de retorno di√°rio: > 60%
- Tempo m√©dio na sess√£o: > 5 minutos
- Registros por usu√°rio/m√™s: > 20
- Taxa de conclus√£o de registro: > 85%

**Ado√ß√£o:**
- Tempo para primeiro registro: < 2 minutos
- Taxa de ativa√ß√£o (primeiro registro em 7 dias): > 70%
- Taxa de reten√ß√£o (usu√°rios ativos ap√≥s 30 dias): > 50%
- Taxa de churn mensal: < 10%

**Valor:**
- Usu√°rios que definem meta: > 40%
- Taxa de conclus√£o de meta mensal: > 30%
- Usu√°rios que exportam relat√≥rios: > 20%
- NPS (Net Promoter Score): > 50

### 6.2 M√©tricas T√©cnicas

**Performance:**
- First Contentful Paint: < 1.5s
- Time to Interactive: < 3s
- Lighthouse Score: > 90
- Uptime: > 99.5%

**Qualidade:**
- Taxa de erros: < 0.1%
- Tempo m√©dio de resposta da API: < 200ms
- Cobertura de testes: > 70%
- Bugs cr√≠ticos resolvidos em: < 24h

### 6.3 M√©tricas de Neg√≥cio

**Crescimento:**
- Novos usu√°rios/m√™s: Meta inicial 1000
- Taxa de crescimento mensal: > 20%
- CAC (Custo de Aquisi√ß√£o): < R$ 10
- LTV (Lifetime Value): > R$ 50

**Monetiza√ß√£o (Fase 3):**
- Taxa de convers√£o para Premium: > 5%
- MRR (Monthly Recurring Revenue): Meta R$ 10k em 6 meses
- Churn de assinantes: < 5% mensal

---

## 7. Riscos e Mitiga√ß√µes

### 7.1 Riscos T√©cnicos

**Risco: Problemas de performance com grande volume de dados**
- **Mitiga√ß√£o:** 
  - Implementar pagina√ß√£o e lazy loading desde o in√≠cio
  - Usar views materializadas no PostgreSQL
  - Cache estrat√©gico com Redis
  - Otimiza√ß√£o de queries com √≠ndices adequados

**Risco: Problemas de seguran√ßa (vazamento de dados)**
- **Mitiga√ß√£o:**
  - Auditorias de seguran√ßa regulares
  - Implementar rate limiting
  - Criptografia de dados sens√≠veis
  - Testes de penetra√ß√£o peri√≥dicos
  - Compliance com LGPD desde o in√≠cio

**Risco: Depend√™ncias de terceiros (APIs, servi√ßos)**
- **Mitiga√ß√£o:**
  - Ter fallbacks para servi√ßos cr√≠ticos
  - Monitoramento de uptime de servi√ßos externos
  - Contratos SLA com provedores
  - Documenta√ß√£o de procedimentos de conting√™ncia

### 7.2 Riscos de Produto

**Risco: Baixa ado√ß√£o de usu√°rios**
- **Mitiga√ß√£o:**
  - Onboarding simplificado e intuitivo
  - Tutorial interativo no primeiro acesso
  - Feedback cont√≠nuo dos usu√°rios
  - Ajustes r√°pidos baseados em analytics

**Risco: Concorr√™ncia com apps estabelecidos**
- **Mitiga√ß√£o:**
  - Focar em diferenciais √∫nicos (insights, relat√≥rios fiscais)
  - UX superior e mais moderna
  - Pre√ßo competitivo (freemium)
  - Marketing direcionado em comunidades de motoristas

**Risco: Complexidade excessiva afastando usu√°rios**
- **Mitiga√ß√£o:**
  - Design mobile-first e simples
  - Registro em menos de 1 minuto
  - Funcionalidades avan√ßadas opcionais
  - Testes de usabilidade regulares

### 7.3 Riscos de Neg√≥cio

**Risco: Custos de infraestrutura crescerem muito**
- **Mitiga√ß√£o:**
  - Come√ßar com stack serverless (Vercel, Railway)
  - Monitoramento de custos mensal
  - Otimiza√ß√£o cont√≠nua de recursos
  - Planejamento de escala gradual

**Risco: Regulamenta√ß√µes (LGPD, fiscal)**
- **Mitiga√ß√£o:**
  - Consultoria jur√≠dica especializada
  - Compliance desde o design inicial
  - Pol√≠ticas de privacidade claras
  - Termos de uso bem definidos

---

## 8. Conclus√£o e Pr√≥ximos Passos

### 8.1 Resumo Executivo

Este PRD descreve um sistema completo de controle financeiro para motoristas de aplicativo, com foco em:
- **Simplicidade:** Registro em menos de 1 minuto
- **Intelig√™ncia:** Insights e recomenda√ß√µes baseadas em dados
- **Completude:** Desde registro di√°rio at√© relat√≥rios fiscais
- **Modernidade:** Interface moderna, responsiva e acess√≠vel

### 8.2 Diferenciais Competitivos

1. **Sistema de Metas Visual:** Banner sempre vis√≠vel no dashboard
2. **Insights Inteligentes:** Recomenda√ß√µes personalizadas baseadas em padr√µes
3. **Relat√≥rios Fiscais:** Prepara√ß√£o autom√°tica para declara√ß√£o de IR
4. **Captura Autom√°tica:** Integra√ß√£o com apps de corrida (Fase 3)
5. **Benchmarking An√¥nimo:** Compara√ß√£o com outros motoristas (Fase 3)

### 8.3 Pr√≥ximos Passos Imediatos

1. **Valida√ß√£o com Usu√°rios:**
   - Entrevistas com 10-15 motoristas
   - Testes de usabilidade do MVP
   - Ajustes baseados em feedback

2. **Desenvolvimento MVP:**
   - Iniciar Fase 1 conforme roadmap
   - Deploy cont√≠nuo em ambiente de staging
   - Testes automatizados desde o in√≠cio

3. **Marketing e Aquisi√ß√£o:**
   - Landing page para captura de leads
   - Presen√ßa em grupos de motoristas (Facebook, WhatsApp)
   - Parcerias com cooperativas de motoristas

4. **Monitoramento:**
   - Configurar analytics (Google Analytics, Mixpanel)
   - Dashboard de m√©tricas de produto
   - Revis√µes semanais de progresso

---

## 9. Ap√™ndices

### 9.1 Gloss√°rio de Termos

- **Faturamento:** Valor total recebido das corridas
- **Lucro L√≠quido:** Faturamento - Gastos totais
- **Margem:** (Lucro / Faturamento) √ó 100
- **Lucro/km:** Lucro dividido pela quilometragem
- **Custo/km:** Gastos divididos pela quilometragem
- **Meta Di√°ria:** Meta mensal dividida pelos dias √∫teis restantes
- **Benchmarking:** Compara√ß√£o an√¥nima com outros motoristas

### 9.2 Refer√™ncias e Inspira√ß√µes

- **DRIVH:** App de controle financeiro para motoristas (inspira√ß√£o para sistema de metas)
- **Uber Driver App:** Interface e fluxos de registro
- **99 App:** Experi√™ncia do motorista
- **Notion:** Design system e organiza√ß√£o de informa√ß√µes
- **Linear:** Interface moderna e intuitiva

### 9.3 Contatos e Recursos

**Equipe de Desenvolvimento:**
- Tech Lead: [A definir]
- Frontend: [A definir]
- Backend: [A definir]
- Design: [A definir]

**Ferramentas:**
- Design: Figma
- Gerenciamento: Linear ou Jira
- Comunica√ß√£o: Slack ou Discord
- Reposit√≥rio: GitHub
- Documenta√ß√£o: Notion ou Confluence

---

**Vers√£o do Documento:** 2.0  
**√öltima Atualiza√ß√£o:** Janeiro 2026  
**Pr√≥xima Revis√£o:** Ap√≥s conclus√£o do MVP (Fase 1)